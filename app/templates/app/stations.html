{% extends "app/base.html" %}
{% load static from staticfiles %}
{% block title %}数据统计{% endblock %}
{% block special_css %}
    <style>
        .nav-tabs>li.active>a, .nav-tabs>li.active>a:hover, .nav-tabs>li.active>a:focus {
            color: #555;
            cursor: default;
            background-color:#57b382;
            border: 1px solid #ddd;
            border-bottom-color: transparent;
        }
    </style>
{% endblock %}
{% block body_content %}
    <div class="clearfix">
        <div class="col-md-12" style="height: 120px;">
            <p style="font-size: 32px;color: #555;text-indent: 20px;line-height: 120px;">观测点数据排行<span style="float: right;font-size: 12px;color:#ec832a;">统计时间:2016-11-18 12:00:00</span></p>
        </div>
    </div>
    <div class="clearfix">
        <div class="col-md-12 column" style="padding: 0;">
			<div class="tabbable" id="tabs-971732">
				<ul class="nav nav-tabs" style="background-color: #ececec;">
					<li class="active" style="width: 25%;text-align: center;border-right: 1px solid #d1d1d1;">
						 <a href="#panel-realTime" data-toggle="tab" style="">实时排行</a>
					</li>
					<li style="width: 25%;text-align: center;border-right: 1px solid #d1d1d1;">
						 <a href="#panel-yesterday" data-toggle="tab">昨日排行</a>
					</li>
                    <li style="width: 25%;text-align: center;border-right: 1px solid #d1d1d1;">
						 <a href="#panel-week" data-toggle="tab">一周排行</a>
					</li>
                    <li style="width: 25%;text-align: center;">
						 <a href="#panel-month" data-toggle="tab">一月排行</a>
					</li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane active" id="panel-realTime">
						<div class="col-md-12" style="padding: 0;margin-top: 50px;">
                            <table class="table table-striped text-center table-td-center">
                                <thead>
                                    <tr style="background-color: #e8e8e8;">
                                        <th class="text-center" style="padding: 15px;">监测站点</th>
                                        <th class="text-center" style="padding: 15px;">安装地址</th>
                                        <th class="text-center" style="padding: 15px;">经度</th>
                                        <th class="text-center" style="padding: 15px;">纬度</th>
                                        <th class="text-center" style="padding: 15px;">最后更新时间</th>
                                        <th class="text-center" style="padding: 15px;">安装时间</th>
                                    </tr>
                                </thead>
                                <tbody class="tr_hander">
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                    <tr onclick="window.location.href='/historical_device_data/'"><td>张家湾</td><td>张家湾</td><td>183.66</td><td>67.77</td><td>2016-11-18 12:00:00</td><td>2016-11-17 12:00:00</td></tr>
                                </tbody>
                            </table>
                        </div>
					</div>
					<div class="tab-pane" id="panel-yesterday">
						<p>
							YESTERDAY
						</p>
					</div>
                    <div class="tab-pane" id="panel-week">
						<p>
							WEEK
						</p>
					</div>
                    <div class="tab-pane" id="panel-month">
						<p>
							MONTH
						</p>
					</div>

				</div>
			</div>
		</div>
    </div>
{#    <div class="clearfix">#}
{#        <div id="map" style="width:100%;height:600px; border: 1px solid rgba(0, 0, 0, 0.04); border-radius: 6px;"></div>#}
{#    </div>#}
{% endblock %}
{% block special_js %}
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=WZVN4DbW3hfB9MSgMmwVQBHU8ZV8jRxW"></script>
    <script async src="http://c.cnzz.com/core.php"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/LuShu/1.2/src/LuShu_min.js"></script>
    <script>
        var map = new BMap.Map("map");          // 创建地图实例
        var point = new BMap.Point(117.533683,30.699859);  // 创建点坐标
        var sContent =
        "<h4 style='margin:0 0 5px 0;padding:0.2em 0'>池州</h4>" +
        "<img style='float:right;margin:4px' id='imgDemo' src='http://b.hiphotos.baidu.com/baike/pic/item/adaf2edda3cc7cd9645689f33101213fb80e91a5.jpg' width='139' height='104' title='天安门'/>" +
        "<p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>安徽征圣智能科技有限公司主要从事设计、研发、制造和销售电力计量和智能电网配套设备。公司于2011年11月在池州经济技术开发区注册成立，公司现有员工100余人，其中专业研发人员占员工总数的32%，企业注册资金3000万元人民币。 公司在池州投建的年产150万户电能计量箱项目及永磁真空断路器及高压柜项目。该项目占地约60亩，总投资20000万元，其中固定资产投资16000万元。项目达产后年产值可达5亿元以上。达产后将填补池州市新材料（工程塑料）智能电能计量箱、第一代物联网设备、永磁智能真空断路器及小型集成化智能电控高压柜生产企业的空白。</p>" +
        "</div>";
        var infoWindow = new BMap.InfoWindow(sContent);  // 创建信息窗口对象
        var marker = new BMap.Marker(point);
        map.addOverlay(marker);
        marker.addEventListener("click", function(){
{#            lushu.start();#}
            this.openInfoWindow(infoWindow);
            //图片加载完毕重绘infowindow
            document.getElementById('imgDemo').onload = function (){
               infoWindow.redraw();   //防止在网速较慢，图片未加载时，生成的信息框高度比图片的总高度小，导致图片部分被隐藏
            }
        });
        marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
        map.addControl(new BMap.NavigationControl());
        map.addControl(new BMap.ScaleControl());
        map.addControl(new BMap.OverviewMapControl());
        map.addControl(new BMap.MapTypeControl());
        var geolocationControl = new BMap.GeolocationControl();
        geolocationControl.addEventListener("locationSuccess", function(e){
            // 定位成功事件
            var address = '';
            address += e.addressComponent.province;
            address += e.addressComponent.city;
            address += e.addressComponent.district;
            address += e.addressComponent.street;
            address += e.addressComponent.streetNumber;
            alert("当前定位地址为：" + address);
        });
        geolocationControl.addEventListener("locationError",function(e){
            // 定位失败事件
            alert(e.message);
        });
        map.addControl(geolocationControl);
        map.centerAndZoom(point, 15);                 // 初始化地图，设置中心点坐标和地图级别
        map.enableScrollWheelZoom();

        map.enableInertialDragging();
        map.enableContinuousZoom();
        var size = new BMap.Size(10, 20);
        map.addControl(new BMap.CityListControl({
            anchor: BMAP_ANCHOR_BOTTOM_RIGHT,
            offset: size
        }));
    </script>
{% endblock %}