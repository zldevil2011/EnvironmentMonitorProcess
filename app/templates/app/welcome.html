{% extends "app/base.html" %}
{% load static from staticfiles %}
{% block title %}Index{% endblock %}
{% block body_content %}
    <div class="clearfix">
        <div class="col-md-8">

            <div class="clearfix" style=" border: 1px solid #bbbaba; ">
                <div class="col-md-offset-1 col-md-5 col-sm-12">
                    <div class="clearfix">
{#                        <div class="clearfix">#}
{#                            <div class="col-md-12" style="float: left;"><bold>北京</bold></div>#}
{#                        </div>#}
{#                        <div class="clearfix">#}
{#                            <div class="col-md-12" style="float: left;">09:45发布</div>#}
{#                        </div>#}
                        <div class="clearfix">
                            <div class="col-md-12" style="margin: 0 auto;text-align: center;">
                                <h2>3° / 霾</h2>
                            </div>
                        </div>
                        <div class="clearfix" style="text-align: center;">
                            <div class="col-md-4">
                                SO2
                                <h4>60</h4>
                            </div>
                            <div class="col-md-4">
                                O3
                                <h4>30</h4>
                            </div>
                            <div class="col-md-4">
                                PM10
                                <h4>123</h4>
                            </div>

                            <div class="col-md-12"><hr/></div>
                            <div class="col-md-4">
                                东北风
                                <h4>2级</h4>
                            </div>
                            <div class="col-md-4">
                                污染指数
                                <h4>158</h4>
                            </div>
                            <div class="col-md-4">
                                相对湿度
                                <h4>62%</h4>
                            </div>
                            <div class="col-md-12"><hr/></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12">
                    <div id="pm25_now" style="min-width:100%;height:300px;margin: 0 auto;"></div>
                </div>
            </div>
            <div class="clearfix" style="margin-top: 20px;">
                <div id="container" style="min-width:100%;height:300px; border: 1px solid #bbbaba;"></div>
            </div>
        </div>
        <div class="col-md-4" style="height:600px; overflow: auto;">
            <table class="table table-striped text-center">
                <tr>
                    <th class="text-center">监测站点</th>
                    <th class="text-center">PM2.5值(ug/m3)</th>
                    <th class="text-center">空气质量</th>
                </tr>
            </table>
            <table class="table table-striped text-center table-td-center">
{#                <thead>#}
{#                    <tr>#}
{#                        <th class="text-center">监测站点</th>#}
{#                        <th class="text-center">PM2.5值</th>#}
{#                    </tr>#}
{#                </thead>#}
                <tbody>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                    <tr><td>张家湾</td><td>88</td><td style="vertical-align: middle;"><span>优</span><span class="level1"></span></td></tr>
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
{% block special_js %}
    <script src= {% static "app/js/modules/exporting.js" %}></script>
{#    <script src= "http://cdn.hcharts.cn/highcharts/highcharts-more.js"></script>#}
    <script src= {% static "app/js/highcharts-more.js" %}></script>
    <script src= {% static "app/js/modules/solid-gauge.js" %}></script>
    <script>
        $(function () {
            var gaugeOptions = {
                chart: {
                    type: 'solidgauge'
                },
                title: null,
                pane: {
                    center: ['50%', '50%'],
                    size: '85%',
                    startAngle: -90,
                    endAngle: 90,
                    background: {
                        backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                        innerRadius: '60%',
                        outerRadius: '100%',
                        shape: 'arc'
                    }
                },
                tooltip: {
                    enabled: false
                },
                // the value axis
                yAxis: {
                    stops: [
                        [0.1, '#55BF3B'], // green
                        [0.5, '#DDDF0D'], // yellow
                        [0.9, '#DF5353'] // red
                    ],
                    lineWidth: 0,
                    minorTickInterval: null,
                    tickPixelInterval: 400,
                    tickWidth: 0,
                    title: {
                        y: -70
                    },
                    labels: {
                        y: 16
                    }
                },
                plotOptions: {
                    solidgauge: {
                        dataLabels: {
                            y: 5,
                            borderWidth: 0,
                            useHTML: true
                        }
                    }
                }
            };
            // The speed gauge
            $('#pm25_now').highcharts(Highcharts.merge(gaugeOptions, {
                yAxis: {
                    min: 0,
                    max: 500,
                    title: {
                        text: 'PM25'
                    }
                },
                credits: {
                    enabled: false
                },
                series: [{
                    name: 'Speed',
                    data: [480],
                    dataLabels: {
                        format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                        ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span>' +
                        '<span style="font-size:12px;color:silver">ug/m3</span></div>'
                    },
                    tooltip: {
                        valueSuffix: ' wg/m3'
                    }
                }]
            }));
            // Bring life to the dials
            setInterval(function () {
                // Speed
                var chart = $('#pm25_now').highcharts(),
                    point,
                    newVal,
                    inc;
                if (chart) {
                    point = chart.series[0].points[0];
                    inc = Math.round((Math.random() - 0.5) * 100);
                    newVal = point.y + inc;
                    if (newVal < 0 || newVal > 500) {
                        newVal = point.y - inc;
                    }
                    point.update(newVal);
                }
            }, 2000);
        });



        $(function () {
            $('#container').highcharts({
                credits:false,
                chart: {
                    type: 'spline'
                },
                title: {
                    text: '最近一小时PM25检测值'
                },
                subtitle: {
                    text: '来源：各个采集站点'
                },
                xAxis: {
                    categories: ['09:00', '09:10', '09:20', '09:30', '09:40', '09:50', '10:00', '10:10', '10:20', '10:30', '10:40', '10:50']
                },
                yAxis: {
                    title: {
                        text: 'ug/m3'
                    }
                },
                plotOptions: {
                    line: {
                        dataLabels: {
                            enabled: true
                        },
                        enableMouseTracking: false
                    }
                },
                series: [{
                    name: '均值',
                    data: [7.0, 6.9, 9.5, 14.5, 18.4, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
                }, {
                    name: '张家湾',
                    data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
                }]
            });
        });

    </script>
{% endblock %}